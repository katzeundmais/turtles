function refuel()
    while turtle.getFuelLevel() == 0 do
        for i = 1, 16 do
            turtle.select(i)
            item = turtle.getItemDetail()
            if item and item.name == "minecraft:coal" then
                turtle.refuel()  
            end
        end
        turtle.select(1)
        break
    end
end

function digAndMove(n)
    for x = 1, n, 1 do
        while turtle.detect() do
            turtle.dig()
        end
        turtle.forward()
        refuel()
    end
end

function square(n)
    digAndMove(n)
    turtle.turnLeft()
end

io.write("length: ")
a = tonumber(io.read())
io.write("girth: ")
b = tonumber(io.read())

while turtle.digDown() == true do
    turtle.down()
    square(a-1)
    square(b-1)
    square(a-1)
    while turtle.detect() == true do
        digAndMove(1)
        if turtle.detect() == false then
            turtle.turnLeft()
        end
    end
    while turtle.detect() == false do
        turtle.forward()
    end
    turtle.turnLeft()
    while turtle.detect() == false do
        turtle.forward()
    end
    turtle.turnLeft()
    refuel()
end
